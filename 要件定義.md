# 要件定義書：レシピ動画スライド自動生成ツール (Recipe Video to Slides Generator)

## 1. プロジェクト概要
### 1.1 プロジェクト名
Recipe Video to Slides Generator for Mobile

### 1.2 概要
YouTube などの料理レシピ動画の URL を入力すると、AI が動画内容を解析し、「材料リスト」「手順サマリー」「画像付き詳細手順」を自動生成する。
生成されたコンテンツはスマートフォン（特に Android）の縦画面に最適化された Web スライド形式で表示され、調理中の閲覧をサポートする。

### 1.3 ターゲットユーザー
*   **ユーザー:** 投稿者の奥様（Android ユーザー）
*   **利用シーン:** キッチンで料理中。両手が濡れていたり汚れていたりするため、極力操作を減らしたい。
*   **課題:** 動画だと「今の分量なんだっけ？」「今の工程もう一回見たい」という時に巻き戻し操作が面倒。

## 2. 目的とゴール
### 2.1 目的
動画レシピの「情報の網羅性」と、テキストレシピの「一覧性・ペース配分のしやすさ」をいいとこ取りする。

### 2.2 ゴール (MVP: Minimum Viable Product)
1.  **ワンタップ生成:** URL を入力するだけで、整形されたレシピページが生成されること。
2.  **調理特化 UI:** スマホ縦画面で、片手（親指）だけで快適に操作できること。
3.  **クラウド運用:** PC を起動せず、いつでもスマホからアクセスできること。

## 3. システム構成 (アーキテクチャ)
本ツールは、**クラウドデプロイ型 Web アプリケーション** として構築する。

*   **フロントエンド (Client):** スマホブラウザ (Chrome on Android) で動作する Web UI。
*   **バックエンド (Server):** クラウド PaaS (Render / Railway 等) 上で動作する Python アプリケーション。
    *   動画のダウンロード、解析、画像抽出を行う。
    *   **注意:** クラウドサーバーからの YouTube アクセスはブロックされるリスクがあるため、対策が必要になる可能性がある。

## 4. 機能要件
### 4.1 入力機能
*   **URL 入力:** YouTube 動画 URL の入力（クリップボードからのペーストボタン推奨）。
*   **生成ボタン:** 解析処理を開始するトリガー。

### 4.2 解析・生成機能 (バックエンド)
1.  **メタデータ取得:** タイトル、サムネイル、動画時間の取得。
2.  **音声/字幕解析 (LLM):**
    *   動画の字幕（または音声認識結果）を **OpenAI API** に渡し、以下を抽出・構造化する。
        *   **材料リスト:** 名称、分量、単位。
        *   **手順サマリー:** 全体を 5〜10 ステップで要約。
        *   **詳細手順:** 各工程のタイムスタンプと説明文。
3.  **画像抽出:**
    *   特定されたタイムスタンプに基づき、動画から静止画（スクリーンショット）を抽出する。

### 4.3 表示機能 (フロントエンド)
*   **タブ切り替え:**
    1.  **材料タブ:** チェックボックス付き材料リスト（購入/準備管理）。
    2.  **サマリータブ:** 全体の流れを確認。
    3.  **スライドタブ:** 1 ステップ 1 画面のカード形式表示。
*   **スライド操作:** スワイプ または 大きな「次へ/戻る」ボタンで遷移。
*   **Screen Wake Lock:** 閲覧中は画面自動オフを無効化。

## 5. UI/UX 要件 (スマホ最適化)
*   **レイアウト:** 縦画面固定。フォントサイズは大きめ (16px以上)。
*   **操作エリア:** 画面下部 1/3 に操作系（ボタン、タブ）を集中させ、片手操作を容易にする。
*   **配色:**
    *   清潔感のある白ベース、または目に優しいダークモード。
    *   食材の色と被らないアクセントカラー。
*   **レスポンス:** 動画解析には時間がかかる（数分）ため、進捗状況がわかるようにする。

## 6. 技術スタック案
*   **Backend:** Python (FastAPI)
    *   `yt-dlp`: 動画・メタデータ取得
    *   `ffmpeg` / `OpenCV`: 画像抽出
    *   `OpenAI API`: テキスト解析 (GPT-4o-mini 等)
*   **Frontend:** HTML5, CSS3, JavaScript (Vanilla または React/Vue)
    *   `Swiper.js`: スライド表示
*   **Infra:**
    *   **PaaS:** Render (推奨) または Railway
    *   **理由:** Docker コンテナのデプロイが容易で、`ffmpeg` 等のシステム依存関係を管理しやすいため。

## 7. 懸念点・確認事項
1.  **YouTube ブロックリスク:** クラウドサーバー（データセンター IP）からのアクセスは YouTube にブロックされやすい。
    *   *対策:* クッキーの利用、プロキシの利用、または「ローカルで解析してアップロード」への切り替え（今回はクラウド要件なので、まずはクラウドで試すが、ダメなら代替案を検討）。
2.  **処理時間:** ユーザーは「許容範囲」と回答済み。
3.  **コスト:** OpenAI API 利用料がかかる（従量課金）。